---
phase: 06-hardening
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/check-binary-size.sh
  - .github/workflows/hardening.yml
  - internal/hardening/memory.go
  - internal/hardening/memory_test.go
  - internal/integration/pipeline_test.go
autonomous: true
requirements: [FOUN-01]
must_haves:
  truths:
    - "Binary size budget check is automatable in CI."
    - "Integration test validates push pipeline with real SQLite."
    - "RSS probing helper exists for Linux runtime checks."
  artifacts:
    - path: "scripts/check-binary-size.sh"
      provides: "15MB size gate"
    - path: "internal/integration/pipeline_test.go"
      provides: "end-to-end push integration test"
    - path: "internal/hardening/memory.go"
      provides: "RSS probe helper"
---

<objective>
Add executable hardening checks that enforce binary size and provide integration/runtime budget validation hooks.
</objective>

<tasks>
<task type="auto">
  <name>Task 1: Add binary size gate script and CI workflow</name>
  <files>scripts/check-binary-size.sh, .github/workflows/hardening.yml</files>
  <action>Implement stripped linux/amd64 build and enforce <=15MB threshold in script and workflow.</action>
  <verify>Script runs locally and workflow references script.</verify>
  <done>Binary size budget has an automated gate.</done>
</task>
<task type="auto">
  <name>Task 2: Add Linux RSS probe helper</name>
  <files>internal/hardening/memory.go, internal/hardening/memory_test.go</files>
  <action>Add VmRSS reader from `/proc/self/status` and Linux-only test.</action>
  <verify>`go test ./...` passes.</verify>
  <done>Runtime memory budget checks are programmatically measurable.</done>
</task>
<task type="auto">
  <name>Task 3: Add integration pipeline test</name>
  <files>internal/integration/pipeline_test.go</files>
  <action>Add test that seeds 100 traces, runs push against test server, and verifies synced state; skip when sandbox networking unavailable.</action>
  <verify>Integration test passes or skips with explicit reason in restricted environments.</verify>
  <done>Pipeline behavior has end-to-end test coverage.</done>
</task>
</tasks>

<output>
After completion, create `.planning/phases/06-hardening/06-01-SUMMARY.md`
</output>
